% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pipeline_functions.R
\name{get_fmriprep_outputs}
\alias{get_fmriprep_outputs}
\title{Identify fMRIPrep-Derived Outputs for a NIfTI File}
\usage{
get_fmriprep_outputs(in_file)
}
\arguments{
\item{in_file}{A character string giving the path to a preprocessed NIfTI \code{.nii.gz} file
generated by fMRIPrep (e.g., with suffix \verb{_desc-preproc_bold.nii.gz}).}
}
\value{
A named list containing the following elements:
\describe{
\item{bold}{The input BOLD file path (returned if found).}
\item{brain_mask}{The corresponding brain mask file (or \code{NULL} if not found).}
\item{confounds}{The path to the confounds \code{.tsv} file (or \code{NULL}).}
\item{melodic_mix}{Path to the melodic mixing matrix from ICA-AROMA (if present).}
\item{aroma_metrics}{Path to the AROMA classification metrics file (if present).}
\item{noise_ics}{A vector of rejected ICA components based on AROMA classification (or \code{NULL}).}
\item{prefix}{A string encoding the core BIDS identifier used to construct expected filenames.}
}
}
\description{
Given the path to a preprocessed NIfTI file from fMRIPrep or fMRIPost, this function
identifies and returns associated derivative files in the same directory. This includes
the corresponding brain mask, confound regressors, ICA-AROMA melodic mixing matrix,
AROMA classification metrics, and a list of rejected noise components (if available).
}
\details{
This function assumes filenames follow BIDS Derivatives conventions and uses the
extracted BIDS entities to reconstruct expected filenames via \code{construct_bids_filename()}.

The function checks for two possible confounds files (\code{desc-confounds_timeseries.tsv} and
\code{desc-confounds_regressors.tsv}), and attempts to resolve AROMA-rejected ICs from the
AROMA classification metrics file (\verb{_desc-aroma_metrics.tsv}) if present.
}
\examples{
\dontrun{
f <- "/path/to/sub-01_task-rest_space-MNI152NLin6Asym_desc-preproc_bold.nii.gz"
outputs <- get_fmriprep_outputs(f)
outputs$brain_mask
}

}
\seealso{
\code{\link[=extract_bids_info]{extract_bids_info()}}, \code{\link[=construct_bids_filename]{construct_bids_filename()}}
}
